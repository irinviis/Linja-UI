<p>maintenances {{ maintenances | json }}</p>

<p>busses {{ busses | json }}</p>



    <!-- Button add maintenance -->
    <button class="btn btn-dark rounded-1 text-uppercase" (click)="openModalAddMaintenance(addMaintenanceTemplate)">
        <i class="fa fa-plus" style="margin-right: 3px;" aria-hidden="true"></i>
        Lisää huolto
    </button>

    <!-- Add maintenance modal -->
    <ng-template #addMaintenanceTemplate>

        <!-- Modal header -->
        <div class="modal-header">
            <h4 class="modal-title pull-left">Lisää huolto</h4>
            <button type="button" class="btn-close close pull-right" aria-label="Close"
                    (click)="modalRef?.hide()">
            </button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
            <form #addForm="ngForm" (ngSubmit)="addMaintenance()" id="addMaintenance">

                <!-- Info -->
                <input class="form-control rounded-1 mt-3" [(ngModel)]="newMaintenance.info" 
                        placeholder="Huollon nimi" name="info">

                <!-- Select bus -->
                <select single class="form-select rounded-1 mt-3" name="busId"
                     [(ngModel)]="newMaintenance.busId">
                <option *ngFor="let bus of busses" value="{{ bus.id }}">
                    {{ bus.regNumber }}
                </option>
                </select>

            </form>
        </div>

        <!-- Buttons -->
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary rounded-1" aria-label="Close"
                    (click)="modalRef?.hide()">
            Peruuttaa
            </button>
            <button type="button" class="btn btn-dark px-4 rounded-1" (click)="addMaintenance()"
                    form="addMaintenance">
            Lisää
            </button>
        </div>

    </ng-template>


    <!-- Maintenances -->
    <ng-container *ngFor="let bus of busses">

        <!-- Card -->
        <div class="card w-100 mt-4 mb-4 rounded-1 border-0">

            <!-- Card body -->
            <div class="card-body">
                    <div class="row">

                    <div class="col-10">
                        <h5 class="card-title text-uppercase fw-semibold" style="margin-bottom: 20px;">{{bus.regNumber}}</h5>
                    </div>

                    <div class="col-10" *ngFor="let maintenance of bus.maintenances">
                       <h6 class="card-title text-uppercase fw-semibold">{{ maintenance.info }}</h6>
                    </div>

                    <!-- Icon buttons -->
                    <div class="col-2">

                        <div class="d-flex justify-content-md-end">
                            <button class="btn rounded-1" routerLink="/maintenance"><i class="fa fa-wrench fa-lg" aria-hidden="true"></i></button>
                        </div>

                        <div class="d-flex justify-content-md-end" >
                            <button class="btn rounded-1"><i class="fa fa-pencil fa-lg" aria-hidden="true"></i></button>
                        </div>

                        <div class="d-flex justify-content-md-end">
                            <button class="btn rounded-1" >
                            <i class="fa fa-trash-o fa-lg" aria-hidden="true"></i></button>
                        </div>

                        
                    </div>
                </div>
            </div>   
        </div>


