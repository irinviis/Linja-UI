
<div class="container mt-4 mb-3">

    <!-- Button add bus -->
    <button class="btn btn-dark rounded-1 text-uppercase" (click)="openModal(template)">
        <i class="fa fa-plus" style="margin-right: 3px;" aria-hidden="true"></i>
        Lisää Bussi
    </button>

    <!-- Add bus modal -->
    <ng-template #template>

        <!-- Modal header -->
        <div class="modal-header">
            <h4 class="modal-title pull-left">Lisää bussi</h4>
            <button type="button" class="btn-close close pull-right" aria-label="Close"
                    (click)="modalRef?.hide()">
            </button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
            <form #addForm="ngForm" (ngSubmit)="addBus()" id="addBus">

                <!-- Bus maker -->
                <input class="form-control rounded-1 mt-3" [(ngModel)]="newBus.maker" 
                        placeholder="Valmistaja" name="maker">

                <!-- RegNumber -->
                <input class="form-control rounded-1 mt-3" [(ngModel)]="newBus.regNumber" 
                        placeholder="Rekisterinumero" name="regNumber">

                <!-- Last Service Date -->
                <input  class="form-control rounded-1 mt-3" [(ngModel)]="newBus.lastServiceDate" 
                        placeholder="Viimeinen huoltopäivämäärä" name="lastServiceDate" bsDatepicker
                        [bsConfig]="bsConfig">

            </form>
        </div>

        <!-- Buttons -->
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary rounded-1" aria-label="Close"
                    (click)="modalRef?.hide()">
            Peruuttaa
            </button>
            <button type="button" class="btn btn-dark px-4 rounded-1" (click)="addBus()"
                    form="addBus">
            Lisää
            </button>
        </div>

    </ng-template>


    <!-- Busses -->
    <ng-container *ngFor="let bus of busses">

        <!-- Card -->
        <div class="card w-100 mt-4 rounded-1" 
            style="border-color: #f0f3e8; border-width: 3px;  border-left-width: 8px; 
            border-left-color: #d9e7cb; background-color: #fdfdf6;">

            <!-- Card body -->
            <div class="card-body">
                    <div class="row">

                    <div class="col-10">
                        <h5 class="card-title text-uppercase">{{ bus.maker }} {{ bus.regNumber }}</h5>
                        <p class="card-text">Viimeinen Huoltopäivämäärä: {{ bus.lastServiceDate | date: "dd MMMM yyyy" }}</p>
                    </div>

                    <!-- Buttons -->
                    <div class="col-2">
                        <div class="d-flex justify-content-md-end">
                            <button class="btn rounded-1"><i class="fa fa-pencil fa-lg" aria-hidden="true"></i></button>
                        </div>

                        <div class="d-flex justify-content-md-end">
                            <button class="btn rounded-1"><i class="fa fa-trash-o fa-lg" aria-hidden="true"></i></button>
                        </div>
                    </div>
    
                </div>

            </div>
          
        </div>

    </ng-container>
    
</div>


